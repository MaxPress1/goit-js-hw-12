{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49649405-8aeb588384e19e05040c9b75c';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios({\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page,\n                per_page: '15'\n            }\n        });\n        return response.data;\n        \n    } catch (error) {\n        return error.messege;\n    }\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(image => `\n    <li>\n            <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n            </a>\n            <div class=\"gallery-info\">\n            <p><span>Likes</span>${image.likes} </p>\n            <p><span>Views</span>${image.views}</p>\n            <p><span>Comments</span>${image.comments}</p>\n            <p><span>Downloads</span>${image.downloads}</p>\n            </div>\n    </li>\n    `).join(\"\");\n\n    galleryList.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    const galleryContainer = document.querySelector(\".gallery\");\n    if (galleryContainer) {\n        galleryContainer.innerHTML = \"\";\n    }\n};\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.remove(\"visible\");\n    }\n};\n\n\nexport function hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.add(\"visible\");\n    }\n};\n\nexport function showLoadMoreButton() {\n    const btnLoadMore = document.querySelector('.btn-load');\n    if (btnLoadMore) {\n        btnLoadMore.classList.remove(\"visible\");\n    }\n};\n\nexport function hideLoadMoreButton() {\n    const btnLoadMore = document.querySelector('.btn-load');\n    if (btnLoadMore) {\n        btnLoadMore.classList.add(\"visible\");\n    }\n};","import { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('form');\n\nconst loadBtn = document.querySelector('.btn-load');\n\nform.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', onLoadMore);\n\nlet page;\nlet query = '';\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    showLoader();\n    let query = form.elements[\"search-text\"].value.trim();\n    if (!form.elements[\"search-text\"].value) {\n        return;\n    }\n    \n    clearGallery();\n\n    try {\n        page = 1;\n        const response = await getImagesByQuery(query, page);\n        const hits = response.hits;\n\n        if (hits.length === 0) {\n            throw new Error('Sorry, there are no images matching your search query. Please try again!');\n        }\n        createGallery(hits);\n\n        if (hits.length < response.totalHits) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n\n    }\n    catch (error) {\n        iziToast.error({\n            message: error.message,\n            position: \"topRight\",\n        });\n    }\n    finally {\n        hideLoader();\n    }\n};\n\n\nasync function onLoadMore() {\n    showLoader();\n    hideLoadMoreButton();\n    page++;\n    try {\n        const data = await getImagesByQuery(query, page);\n        let lengthArr = 15 * page;\n        createGallery(data.hits);\n        hideLoader();\n        showLoadMoreButton();\n        if (lengthArr >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            })\n        }\n\n        const card = document.querySelector('li');\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n    }\n    catch (error) {\n        iziToast.error({\n                message: error.message,\n                position: \"topRight\",\n            });\n    }\n};"],"names":["API_KEY","axios","getImagesByQuery","query","page","error","galleryList","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","galleryContainer","showLoader","loader","hideLoader","showLoadMoreButton","btnLoadMore","hideLoadMoreButton","form","loadBtn","handleSubmit","onLoadMore","event","response","hits","iziToast","data","lengthArr","cardHeight"],"mappings":"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"}