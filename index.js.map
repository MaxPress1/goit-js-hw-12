{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49649405-8aeb588384e19e05040c9b75c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page,\n                per_page: '15'\n            }\n        });\n        return response.data;\n        \n    } catch (error) {\n        return error.messege;\n    }\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n    overlayOpacity: 0.8,\n});\n\nexport function createGallery(images) {\n    const markup = images.map(image => `\n    <li class = \"gallery-item\">\n            <a href=\"${image.largeImageURL}\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n            </a>\n            <div class=\"gallery-info\">\n            <p><span>Likes</span>${image.likes} </p>\n            <p><span>Views</span>${image.views}</p>\n            <p><span>Comments</span>${image.comments}</p>\n            <p><span>Downloads</span>${image.downloads}</p>\n            </div>\n    </li>\n    `).join(\"\");\n\n    galleryList.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n};\n\nexport function clearGallery() {\n    const galleryContainer = document.querySelector(\".gallery\");\n    if (galleryContainer) {\n        galleryContainer.innerHTML = \"\";\n    }\n};\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.remove(\"hidden\");\n    }\n};\n\n\nexport function hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.add(\"hidden\");\n    }\n};\n\nexport function showLoadMoreButton() {\n    const btnLoadMore = document.querySelector('.btn-load');\n    if (btnLoadMore) {\n        btnLoadMore.classList.remove(\"hidden\");\n    }\n};\n\nexport function hideLoadMoreButton() {\n    const btnLoadMore = document.querySelector('.btn-load');\n    if (btnLoadMore) {\n        btnLoadMore.classList.add(\"hidden\");\n    }\n};","import { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('form');\nconst loadBtn = document.querySelector('.btn-load');\n\nform.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', onLoadMore);\n\nlet pageNumber = 1;\nlet query = '';\nlet totalHits = 0;\n\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    query = form.elements[\"search-text\"].value.trim();\n    if (!query) {\n        return;\n    }    \n    showLoader();\n    clearGallery();\n\n    try {\n        pageNumber = 1;\n        const response = await getImagesByQuery(query, pageNumber);\n        const hits = response.hits;\n        totalHits = response.totalHits;\n\n        if (hits.length === 0) {\n            throw new Error('Sorry, there are no images matching your search query. Please try again!');\n        }\n        createGallery(hits);\n\n        if (hits.length < totalHits) {\n            showLoadMoreButton();\n        } else {\n            hideLoadMoreButton();\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n        }\n\n    }\n    catch (error) {\n        hideLoadMoreButton();\n        iziToast.error({\n            message: error.message,\n            position: \"topRight\",\n        });\n    }\n    finally {\n        hideLoader();\n    }\n};\n\n\nasync function onLoadMore() {\n    showLoader();\n    hideLoadMoreButton();\n    pageNumber++;\n\n    try {\n        const data = await getImagesByQuery(query, pageNumber);\n\n        createGallery(data.hits);\n\n        const totalLoaded = document.querySelectorAll('.gallery-item').length;\n        \n        if (totalLoaded >= totalHits) {\n            iziToast.show({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            hideLoadMoreButton();\n        } else {\n            showLoadMoreButton();\n        }\n\n        const newItems = document.querySelectorAll('.gallery-item');\n        if (newItems.length > 0) {\n            const lastItem = newItems[newItems.length - 15] || newItems[0]; // остання порція або fallback\n            const itemTop = lastItem.getBoundingClientRect().top + window.scrollY;\n            window.scrollTo({\n                top: itemTop,\n                behavior: 'smooth'\n            });\n        }\n    }\n    catch (error) {\n        iziToast.error({\n                message: error.message,\n                position: \"topRight\",\n            });\n    }\n    finally {\n        hideLoader();\n    }\n};\n\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","axios","error","galleryList","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","galleryContainer","showLoader","loader","hideLoader","showLoadMoreButton","btnLoadMore","hideLoadMoreButton","form","loadBtn","handleSubmit","onLoadMore","pageNumber","totalHits","event","response","hits","iziToast","data","newItems","itemTop"],"mappings":"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"}